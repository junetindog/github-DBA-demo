=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2024.04.13 16:10:21 =~=~=~=~=~=~=~=~=~=~=~=
Using username "oracle".
Last login: Sat Apr 13 04:03:30 EDT 2024 from ep13db04.corp.ads on ssh
Last login: Sat Apr 13 04:10:22 2024 from 142.63.12.215
[?1034hep13db05:~ $ ps -ef | grep pmon
oracle   110673      1  0 Feb21 ?        00:08:00 ora_[01;31m[Kpmon[m[K_P13D03UA2
oracle   184163      1  0  2023 ?        00:30:34 asm_[01;31m[Kpmon[m[K_+ASM5
oracle   187462      1  0  2023 ?        00:31:53 apx_[01;31m[Kpmon[m[K_+APX5
oracle   190949      1  0  2023 ?        00:31:40 ora_[01;31m[Kpmon[m[K_P13DB02A2
oracle   190950      1  0  2023 ?        00:39:04 ora_[01;31m[Kpmon[m[K_P13DB02C2
oracle   190951      1  0  2023 ?        00:36:41 ora_[01;31m[Kpmon[m[K_P13DB02B2
oracle   191026      1  0  2023 ?        01:43:31 ora_[01;31m[Kpmon[m[K_P13DB02D2
oracle   191139      1  0  2023 ?        00:32:48 ora_[01;31m[Kpmon[m[K_LAIRD5
oracle   193837 193247  0 04:10 pts/1    00:00:00 grep --color=auto [01;31m[Kpmon[m[K
ep13db05:~ $ uptime
 04:10:30 up 356 days, 22:13,  3 users,  load average: 2.55, 3.59, 3.60
ep13db05:~ $ . oraenv
ORACLE_SID = [oracle] ? P13DB02A2
The Oracle base has been set to /u01/app/oracle
ep13db05:~ $ sqlplus / as sysdba

SQL*Plus: Release 12.2.0.1.0 Production on Sat Apr 13 04:10:38 2024

Copyright (c) 1982, 2016, Oracle.  All rights reserved.


Connected to:
Oracle Database 12c Enterprise Edition Release 12.2.0.1.0 - 64bit Production

SQL> sho pdbs

    CON_ID CON_NAME			  OPEN MODE  RESTRICTED
---------- ------------------------------ ---------- ----------
	 2 PDB$SEED			  READ ONLY  NO
	 4 ILML2PR			  READ WRITE NO
SQL> alter session set container = ILML2PR;

Session altered.

SQL> ^Fcol "Tablespace" for a22
col "Used MB" for 99,999,999
col "Free MB" for 99,999,999
SP2-0734: unknown command beginning "col "Tabl..." - rest of line ignored.
SQL> SQL> SQL> col "Total MB" for 99,999,999
select df.tablespace_name "Tablespace",
SQL> totalusedspace "Used MB",
  2    3  (df.totalspace - tu.totalusedspace) "Free MB",
  4  df.totalspace "Total MB",
--round(100 * ( (df.totalspace - tu.totalusedspace)/ df.totalspace))
--"Pct. Free",
round((tu.totalusedspace/df.totalspace)*100)
  5  "Pct. Used"
  6    7    8    9  from
(select tablespace_name,
 10   11  round(sum(bytes) / 1048576) TotalSpace
 12  from dba_data_files
 13  group by tablespace_name) df,
(select round(sum(bytes)/(1024*1024)) totalusedspace, tablespace_name
 14   15  from dba_segments
 16  group by tablespace_name) tu
 17  where df.tablespace_name = tu.tablespace_name and df.tablespace_name in ('DATA04');

Tablespace			   Used MB     Free MB	  Total MB  Pct. Used
------------------------------ ----------- ----------- ----------- ----------
DATA04				   879,040     154,080	 1,033,120	   85

SQL> set line 1000
show parameter DB_CREATE_FILE_DESTSQL> 

NAME				     TYPE	 VALUE
------------------------------------ ----------- ------------------------------
db_create_file_dest		     string	 +EP13DATA01
SQL> set line 100
col file_name form a50
select file_name, bytes/1024/1024, autoextensible  from DBA_DATA_FILES where tablespace_name = 'DATA04';SQL> SQL> 

FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---
+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     32720 NO
32B/DATAFILE/data04.395.986052523

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     32720 NO
32B/DATAFILE/data04.407.986232427

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.408.986232431

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.409.986232433

FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.410.986232435

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.411.986232443

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.412.986232445

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO

FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---
32B/DATAFILE/data04.413.986232447

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.414.986232447

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.415.986232451

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.396.986572039


FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---
+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.432.986595799

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.433.986595813

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.528.990973655

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.862.996242235

FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.1127.1006852953

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.1128.1006852957

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.1224.1017546743

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO

FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---
32B/DATAFILE/data04.1446.1025924239

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.3222.1033871893

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.3215.1095820059

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.2083.1100836117


FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---
+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.1798.1105502035

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.2350.1105516613

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.5078.1115279209

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.5309.1115279215

FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.5125.1115279217

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.5324.1124937311

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.5132.1130731067

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO

FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---
32B/DATAFILE/data04.1641.1134455155

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.2221.1141022679

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.5594.1147688079

+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     30720 NO
32B/DATAFILE/data04.5757.1156736297


FILE_NAME					   BYTES/1024/1024 AUT
-------------------------------------------------- --------------- ---
+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E9	     15360 NO
32B/DATAFILE/data04.2137.1160446551


34 rows selected.

SQL> set line 1000
show parameter DB_CREATE_FILE_DESTSQL> 

NAME				     TYPE	 VALUE
------------------------------------ ----------- ------------------------------
db_create_file_dest		     string	 +EP13DATA01
SQL> SELECT name, free_mb, total_mb, (total_mb-free_mb)/total_mb*100 as "Used percentage"
FROM v$asm_diskgroup where name='EP13DATA01';  2  

NAME				  FREE_MB   TOTAL_MB Used percentage
------------------------------ ---------- ---------- ---------------
EP13DATA01			245292468  504483840	  51.3775371

SQL> col "Tablespace" for a22
SQL> col "Used MB" for 99,999,999
SQL> col "Free MB" for 99,999,999
col "Total MB" for 99,999,999
SQL> select df.tablespace_name "Tablespace",
SQL>   2  totalusedspace "Used MB",
  3  (df.totalspace - tu.totalusedspace) "Free MB",
  4  df.totalspace "Total MB",
  5  --round(100 * ( (df.totalspace - tu.totalusedspace)/ df.totalspace))
  6  --"Pct. Free",
round((tu.totalusedspace/df.totalspace)*100)
  7    8  "Pct. Used"
from
  9   10  (select tablespace_name,
round(sum(bytes) / 1048576) TotalSpace
from dba_data_files
 11   12   13  group by tablespace_name) df,
 14  (select round(sum(bytes)/(1024*1024)) totalusedspace, tablespace_name
 15  from dba_segments
 16  group by tablespace_name) tu
 17  where df.tablespace_name = tu.tablespace_name and df.tablespace_name in ('DATA04');

Tablespace		   Used MB     Free MB	  Total MB  Pct. Used
---------------------- ----------- ----------- ----------- ----------
DATA04			   879,040     154,080	 1,033,120	   85

SQL> alter database datafile '+EP13DATA01/P13DB02A/7494F082B3F34CA9E05323983F8E932B/DATAFILE/data04.2137.1160446551' resize 30720M;

Database altered.

SQL> col "Tablespace" for a22
col "Used MB" for 99,999,999
col "Free MB" for 99,999,999
col "Total MB" for 99,999,999
select df.tablespace_name "Tablespace",
totalusedspace "Used MB",
(df.totalspace - tu.totalusedspace) "Free MB",
df.totalspace "Total MB",
--round(100 * ( (df.totalspace - tu.totalusedspace)/ df.totalspace))
SQL> SQL> SQL> SQL> --"Pct. Free",
round((tu.totalusedspace/df.totalspace)*100)
"Pct. Used"
  2    3  from
  4    5    6    7    8  (select tablespace_name,
  9   10   11  round(sum(bytes) / 1048576) TotalSpace
 12  from dba_data_files
 13  group by tablespace_name) df,
 14  (select round(sum(bytes)/(1024*1024)) totalusedspace, tablespace_name
 15  from dba_segments
 16  group by tablespace_name) tu
 17  where df.tablespace_name = tu.tablespace_name and df.tablespace_name in ('DATA04');

Tablespace		   Used MB     Free MB	  Total MB  Pct. Used
---------------------- ----------- ----------- ----------- ----------
DATA04			   879,040     169,440	 1,048,480	   84

SQL> alter tablespace DATA04 add datafile size 15360M; 

Tablespace altered.

SQL> col "Tablespace" for a22
SQL> col "Used MB" for 99,999,999
col "Free MB" for 99,999,999
col "Total MB" for 99,999,999
select df.tablespace_name "Tablespace",
totalusedspace "Used MB",
SQL> (df.totalspace - tu.totalusedspace) "Free MB",
SQL> df.totalspace "Total MB",
--round(100 * ( (df.totalspace - tu.totalusedspace)/ df.totalspace))
--"Pct. Free",
round((tu.totalusedspace/df.totalspace)*100)
"Pct. Used"
SQL> from
(select tablespace_name,
  2  round(sum(bytes) / 1048576) TotalSpace
  3    4    5    6    7    8  from dba_data_files
group by tablespace_name) df,
  9   10   11   12  (select round(sum(bytes)/(1024*1024)) totalusedspace, tablespace_name
 13   14   15  from dba_segments
group by tablespace_name) tu
 16   17  where df.tablespace_name = tu.tablespace_name and df.tablespace_name in ('DATA04');

Tablespace		   Used MB     Free MB	  Total MB  Pct. Used
---------------------- ----------- ----------- ----------- ----------
DATA04			   879,040     184,800	 1,063,840	   83

SQL> 